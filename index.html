<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Have I Been Scraped by Spy.pet?</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="A simple tool, made for normal users & discord server administrators to check if there's a scraper bot on your server." />
    <meta
      name="keywords"
      content="spy.pet, spy.pet checker, spy.pet lookup, spy.pet bot finder, tool, utility, lookup, free, open source" />
    <meta name="author" content="Nitrrine" />
    <meta name="theme-color" content="#0070F3" />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="https://fonts.xz.style/serve/inter.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css" />
    <style>
      .result {
        background: #0f0f0f;
        padding: 1em;
        border-radius: 1em;
      }

      .result-good {
        background: #1b5a16;
      }

      .result-bad {
        background: #5a1616;
      }

      .hide {
        display: none;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Have I Been Scraped by Spy.pet?</h1>
      <nav>
        <a href="/faq.html">FAQ</a>
        /
        <a
          href="https://github.com/Nitrrine/have-i-been-scraped-by-spy-pet"
          target="_blank"
          >View on GitHub</a
        >
      </nav>
    </header>
    <main>
      <p>
        Checks if server contains a data scraper bot,
        <a
          href="https://www.youtube.com/watch?v=ktxbXlF6UQE"
          target="_blank"
          rel="noopener noreferer"
          >more info</a
        >.
      </p>
      <input type="text" placeholder="Enter Discord Server ID" id="serverId" />
      <button id="check-btn">Check</button>
      <div class="result result-good hide" id="good-result">
        <p>Everything is OK, Spy.pet is not tracking this server!</p>
        <i>This service is powered by kickthespy.pet, big thanks to them :3</i>
      </div>
      <div class="result result-bad hide" id="bad-result">
        <p>
          Everything is NOT ok, Spy.pet is tracking this server, using bot under
          name <strong id="botName"></strong>.
        </p>
        <details>
          <summary>More info</summary>
          <div style="display: flex; gap: 0.5em">
            <img
              src=""
              alt="bot's pfp"
              title="Bot's Avatar"
              id="botAvatar"
              width="64"
              height="64" />
            <div>
              <p>Bot's Username: <code id="botUsername"></code></p>
              <p>Bot's ID: <code id="botId"></code></p>
            </div>
          </div>
        </details>
        <i>This service is powered by kickthespy.pet, big thanks to them :3</i>
      </div>
    </main>
    <script>
      const API_URL = "https://kickthespy.pet"

      document
        .getElementById("check-btn")
        .addEventListener("click", function (event) {
          const serverId = document.getElementById("serverId").value

          fetch(`${API_URL}/getBot?id=${serverId}`)
            .then((response) => response.json())
            .then((data) => {
              if (data.id) {
                document.getElementById("botName").innerText = data.global_name
                document.getElementById("botUsername").innerText = data.username
                document.getElementById("botId").innerText = data.id
                document
                  .getElementById("botAvatar")
                  .setAttribute("src", data.avatarURL)

                document.getElementById("good-result").classList.add("hide")
                document.getElementById("bad-result").classList.remove("hide")
              } else {
                document.getElementById("good-result").classList.remove("hide")
                document.getElementById("bad-result").classList.add("hide")
              }
            })
            .catch((error) => console.error("Error:", error))
        })
    </script>
  </body>
</html>
